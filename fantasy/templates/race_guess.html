{% extends "fantasy-series.html" %}
{% load humanize %}

{% block fantasy-main %}
<div class="section-header">
    <div class="section-title"><a href="{{ series.get_absolute_url }}">{{ series }}</a> - {{ race }}</div>
    {% if race.description %}<div class="section-tagline">{{ race.description }}</div>{% endif %}
</div>
<div class="fantasy-form-help">
Pick {{ series.num_guesses|apnumber }} {{ series.competitor_label }}{{ series.num_guesses|pluralize:",s" }} you think will excel in this race.<br />
To add a new {{ series.competitor_label }}, enter a name and click the "Add {{ series.competitor_label }}" button.
</div>
<div id="race-guess-container" class="fantasy-form-container">
    <form name="guess-form" method="POST" action="">
    {% if formset %}
        {{ formset.management_form }}
        {% for error in formset.non_form_errors %}
        {{ error }}
        {% endfor %}
        <table id="race-guess-table" class="fantasy-list-table">
            <thead>
                <th>{{ series.competitor_label }}</th>
            </thead>
            <tbody>
            {% for form in formset.forms %}
            <tr>
                <td>{{ form.competitor }} {{ form.competitor.errors }}</td>
                {% if form.non_field_errors %}<td> {{ form.non_field_errors }}</td>{% endif %}
            </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}
    
    <input type="submit" name="guess" value="Submit Picks" />

{% if add_competitor_ok %}
<br /><br />
or
<br /><br />
    <table>
    {{ competitor_form.as_table }}
    </table>
    
    <input type="submit" name="guess" value="Add {{ series.competitor_label }}" />
{% endif %}
    
    </form>
</div>
{% endblock %}
