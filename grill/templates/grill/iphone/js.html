<script type="text/javascript">

var donenessChange = new YAHOO.util.CustomEvent('doneness change');
donenessChange.subscribe(new_doneness);

var foodChange = new YAHOO.util.CustomEvent('food change');
foodChange.subscribe(new_food);


function new_food(type, args) {
    var food_id = args[0];
    var doneness_id = document.getElementById('doneness-id').value;
    var hardware_id = document.getElementById('hardware-id').value;
    foodRequest(food_id, doneness_id, hardware_id);
};

function new_doneness(type, args) {
    var doneness_id = args[0]
    // send doneness request
    // receive doneness html, replace in div
    var food_id = document.getElementById('food-id').value;
    var hardware_id = document.getElementById('hardware-id').value;
    var url = "{% url grill-doneness %}";
    url += '?id='+doneness_id;
    YAHOO.plugin.Dispatcher.fetch ( 'doneness', url );
    
    foodRequest(food_id, doneness_id, hardware_id);
};

function foodRequest(food_id, doneness_id, hardware_id) {
    var url = "{% url grill %}";
    url += '?food='+food_id;
    url += '&doneness='+doneness_id;
    url += '&hardware='+hardware_id;
    snippet_navigation(url);
};
</script>